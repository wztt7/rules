// ==UserScript==
// @ConfigName        å¢¨é±¼è‡ªç”¨çš„QXé…ç½®æ–‡ä»¶
// @Author            @ddgksf2013
// @UpdateTime        2025/05/05 22:00UTC/GMT +8




# > å»ºè®®åœ¨ã€Œå…¶ä»–è®¾ç½®ã€é‡Œã€ŒGeoLite2ã€çš„ã€Œæ¥æºã€å¡«å†™ä½¿ç”¨ä¸‹é¢é“¾æ¥ã€Œä»»é€‰ä¸€ä¸ªã€ï¼Œå¹¶å¼€å¯ã€Œè‡ªåŠ¨æ›´æ–°ã€
; https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
; https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb


# > QuantumultXå›¾æ ‡åº“è®¢é˜…ï¼Œæ‰“å¼€ä»¥ä¸‹URLï¼Œæ‰‹æœºç«¯ç‚¹å‡»å›¾ç‰‡å³å¯å¿«æ·æ·»åŠ ã€Œ1.0.30+ã€
; https://github.com/ddgksf2013/Icon/blob/master/README.md


# > åˆ©ç”¨æè¿°æ–‡ä»¶å±è”½IOSæ›´æ–°æé†’ï¼ˆå®‰è£…åé‡å¯æ‰‹æœºï¼‰
; https://d-updater.i4.cn/web/mobileconfig/iOS18.mobileconfig


# > å¹¿ç”µç”¨æˆ·ä½¿ç”¨QuantumultXå¾®ä¿¡å‡ºç°è½¬åœˆç°è±¡è§£å†³æ–¹æ¡ˆ
; æ‰“å¼€QuantumultXçš„å…¼å®¹æ€§å¢å¼ºå¼€å…³[åº”è¯¥æœ‰æ”¹å–„][å¼€å…³æ‰“å¼€åå¾®åšåŠéƒ¨åˆ†APPå»å¹¿å‘Šä¼šå¤±æ•ˆ]


# > QuantumultX @ddgksf2013 è®¾ç½®æ¨è
; ã€Œé€šçŸ¥ã€æ ä¸­ï¼Œå»ºè®®ä»…å¼€å¯[ç­–ç•¥æ£€æµ‹é€šçŸ¥]å’Œ[è„šæœ¬é€šçŸ¥]å¼€å…³ï¼Œã€ŒVPNã€æ ä¸­ï¼Œå»ºè®®å…³é—­[å…¼å®¹æ€§å¢å¼º]ã€[åˆ†æµåŒ¹é…ä¼˜åŒ–]å’Œ[MPM]å¼€å…³



[general]

# > ç”¨äºèŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•
server_check_url= http://www.gstatic.com/generate_204
# > æœåŠ¡å™¨æµ‹è¯•è¶…æ—¶æ—¶é—´ (æ¯«ç§’)
server_check_timeout = 3000
# > ç”¨äºè®¾ç½®å›¾æ ‡æ˜¾ç¤º
profile_img_url=https://github.githubassets.com/images/modules/site/integrators/google.png
# > ç”¨äºCheckèŠ‚ç‚¹IPåœ°å€(ä»¥ä¸‹geo_location_checkerä»»é€‰ä¸€ä¸ªå³å¯)
geo_location_checker=disabled
;geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
# > åŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ï¼Œç”¨äºå¼•ç”¨èµ„æºçš„è½¬æ¢
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
# > ä¸‹åˆ—è·¯å¾„å°†ä¸ç»è¿‡QuanXçš„å¤„ç†
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32
# udp_whitelist=1-442, 444-65535
# > ç¬¬ä¸€ä¸ªfilterä¸º4gæ¨¡å¼å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬äºŒä¸ªfilterä¸ºå…¶ä»–wifiä¸‹å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬ä¸‰ä¸ªwifi1ä¿®æ”¹æˆä½ è·¯ç”±å™¨ç¿»å¢™çš„wifiåå¼€å¯ç›´è¿æ¨¡å¼ï¼Œç¬¬å››ä¸ªwifi2ä¸ºä½ å…¬å¸æˆ–è€…å…¶ä»–æœ‰è·¯ç”±å™¨ç¿»å¢™çš„WiFiåèµ°ç›´è¿ï¼‰
# > é»˜è®¤å…³é—­æ ¹æ®wifiåˆ‡æ¢æ¨¡å¼ï¼Œå¦‚éœ€å¼€å¯ï¼Œåˆ é™¤ä¸‹æ–¹çš„"#"å³å¯
#running_mode_trigger=filter, filter, wifi1:all_direct, wifi2: all_direct
# > dns_exclusion_list
dns_exclusion_list=*.10099.com.cn, *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn



[task_local]

# > è¯·æ‰‹åŠ¨æ·»åŠ ä¸‹é¢çš„è®¢é˜…ï¼ˆæµåª’ä½“Taskè®¢é˜…é›†åˆï¼‰
; https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/UI-Action.json
# > æµåª’ä½“è§£é”æŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“è§£é”æŸ¥è¯¢, img-url=arrowtriangle.right.square.system, enabled=true



[rewrite_local]



[rewrite_remote]

https://raw.githubusercontent.com/chxm1023/Rewrite/main/Reheji.js, tag=Revenuecatè§£é”åˆé›†, update-interval=172800, opt-parser=true, enabled=false

https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/BilibiliAdsLite.conf, tag=å“”å“©å“”å“©å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true


https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.conf, tag=Spotify, update-interval=86400, opt-parser=false, enabled=true

https://github.com/ddgksf2013/dev/raw/master/ForOwnUse.conf, tag=å¢¨é±¼ä¸“å±, update-interval=86400, opt-parser=false, enabled=true

https://gist.githubusercontent.com/ddgksf2013/12ef6aad209155e7eb62c5b00c11b9dd/raw/StartUpAds.conf, tag=å¢¨é±¼å»å¼€å±, update-interval=86400, opt-parser=false, enabled=true

https://raw.githubusercontent.com/WeiGiegie/666/main/mgsp.js, tag=å’ªå’•, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/WeiGiegie/666/main/mgtv.js, tag=èŠ’æœ, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/NeteaseCloudMusic/netease.js, tag=ç½‘æ˜“äº‘, update-interval=172800, opt-parser=true, enabled=false



https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/YoutubeAds.conf, tag=æ²¹ç®¡å»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true

https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/Weibo.conf, tag=å¾®åšå»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true

https://github.com/ddgksf2013/Rewrite/raw/master/Html/General.conf, tag=Googleé‡å®šå‘, update-interval=86400, opt-parser=false, enabled=true


https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/XiaoHongShuAds.conf, tag=å°çº¢ä¹¦å‡€åŒ–, update-interval=86400, opt-parser=false, enabled=true


https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/Applet.conf, tag=å¾®ä¿¡å°ç¨‹åºå»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true


https://gist.githubusercontent.com/ddgksf2013/f43026707830c7818ee3ba624e383c8d/raw/baiduCloud.adblock.js, tag=ç™¾åº¦ç½‘ç›˜å‡€åŒ–, update-interval=86400, opt-parser=true, enabled=true

https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/Function/UnblockURLinWeChat.conf, tag=å¾®ä¿¡è§£é”è¢«å±è”½çš„URL, update-interval=86400, opt-parser=false, enabled=true

https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJS, update-interval=86400, opt-parser=false, enabled=false


#è¿œç¨‹å¤å†™æ¨¡å—ï¼Œå†…åŒ…å«ä¸»æœºåhostnameä»¥åŠå¤å†™rewriteè§„åˆ™
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’, é»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60=86400 ç§’ï¼Œä¹Ÿå°±æ˜¯24å°æ—¶.
# opt-parser=true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹æœ¬è®¢é˜… å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨;

#æ”¯æŒæœ¬åœ°/iCloudçš„å¤å†™è§„åˆ™æ–‡ä»¶ï¼Œä½äºQuantumult X/Profilesè·¯å¾„ä¸‹
;rewrite.txt, tag=æœ¬åœ°å¤å†™, opt-parser=false, enabled=false



[server_local]



[server_remote]


[dns]

;prefer-doh3
;doh-server = https://223.5.5.5/dns-query, https://223.6.6.6/dns-query
# > QuantumultXå¼€å¯IPV6æ–¹æ³•ï¼Œåˆ å»ä¸‹é¢çš„ã€Œno-ipv6ã€ï¼Œåœ¨ã€ŒVPNã€æ ä¸­ï¼Œå¼€å¯ã€Œå…¼å®¹æ€§å¢å¼ºã€
no-ipv6
no-system
server=223.5.5.5
server=119.29.29.29
server=114.114.114.114
server=/*.icloud.com/119.29.29.29
server=/*.icloud.com.cn/119.29.29.29
server=/*.tencent.com/119.29.29.29
server=/*.weixin.com/119.29.29.29



[policy]

static=ğŸ” Googleç³»åˆ—, proxy, ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯, ğŸ‡ºğŸ‡¸ ç¾å›½, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png
static=ğŸ¶ Spotify, direct, proxy, ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png
static=ğŸ¤– äººå·¥æ™ºèƒ½, proxy, ğŸ‡ºğŸ‡¸ ç¾å›½, img-url=https://raw.githubusercontent.com/wztt7/icon/main/ChatGPT.png
static=ğŸ è‹¹æœæœåŠ¡, direct, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_2.png
static=ğŸŒ å›½å¤–ç½‘ç«™, proxy, ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯, ğŸ‡ºğŸ‡¸ ç¾å›½, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png
static=ğŸ•¹ ç»ˆææ¸…å•, direct, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png
static=ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯, server-tag-regex=é¦™æ¸¯|ğŸ‡­ğŸ‡°ï¸|HK|Hong|CN|BGP, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
static=ğŸ‡ºğŸ‡¸ ç¾å›½, server-tag-regex=ç¾å›½|US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png

# url-latency-benchmark=ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯è‡ªåŠ¨, server-tag-regex=(?=.*(CN|BGP|æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
# url-latency-benchmark=ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨, server-tag-regex=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png







[filter_remote]

#è¿œç¨‹åˆ†æµæ¨¡å—ï¼Œå¯ä½¿ç”¨force-policyæ¥å¼ºåˆ¶ä½¿ç”¨ç­–ç•¥åå¥½, æ›¿æ¢è¿œç¨‹è§„åˆ™å†…æ‰€æŒ‡å®šçš„ç­–ç•¥ç»„
;åŒæ ·çš„
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’, é»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60=86400 ç§’ï¼Œä¹Ÿå°±æ˜¯24å°æ—¶.
# opt-parser=true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹æœ¬è®¢é˜… å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨;
#æ”¯æŒæœ¬åœ°/iCloudè§„åˆ™æ–‡ä»¶ï¼Œä½äºQuantumult X/Profilesè·¯å¾„ä¸‹
;filter.txt, tag=æœ¬åœ°åˆ†æµ, enabled=false

https://raw.githubusercontent.com/ddgksf2013/Filter/master/Unbreak.list, tag=ğŸ¢ è§„åˆ™ä¿®æ­£, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/Cats-Team/AdRules/main/qx.conf, tag=ğŸš¦ å¹¿å‘Šç»ˆç»“è€…, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/WeChat/WeChat.list, tag=å¾®ä¿¡ç›´è¿, force-policy=direct, update-interval=172800, opt-parser=false, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=ğŸ è‹¹æœæœåŠ¡, force-policy=ğŸ è‹¹æœæœåŠ¡, update-interval=172800, opt-parser=false, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTube/YouTube.list, tag=ğŸ¬ YouTube, force-policy=ğŸ” Googleç³»åˆ—, update-interval=172800, opt-parser=false, enabled=true

https://gist.githubusercontent.com/ddgksf2013/cb4121e8b5c5d865cc949cb8120320c4/raw/Ai.yaml, tag=ğŸ¤– äººå·¥æ™ºèƒ½, force-policy=ğŸ¤– äººå·¥æ™ºèƒ½, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag=ğŸ¶ Spotify, force-policy=ğŸ¶ Spotify, update-interval=172800, opt-parser=false, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Google/Google.list, tag=ğŸ” Googleç³»åˆ—, force-policy=ğŸ” Googleç³»åˆ—, update-interval=172800, opt-parser=false, enabled=true

https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Proxy.list, tag=ğŸŒ å›½å¤–ç½‘ç«™, force-policy=ğŸŒ å›½å¤–ç½‘ç«™, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list, tag=ğŸ¼ å›½å†…ç½‘ç«™, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

[filter_local]

# > ä¸€äº›æ¯”è¾ƒå®¹æ˜“å¿½è§†çš„åˆ†æµ
host, ad.12306.cn, direct
host, sdkapp.uve.weibo.com, direct
host-keyword, github, proxy
IP-CIDR,95.161.76.0/20, proxy

# > local
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
ip-cidr, 182.254.116.0/24, direct
geoip, cn, direct
final, ğŸ•¹ ç»ˆææ¸…å•



[http_backend]

# > Boxjsè®¾ç½®ï¼Œæ”¹ä¸ºä½¿ç”¨http backendæ–¹å¼ï¼Œè®¿é—®åœ°å€æ”¹ä¸ºhttp://127.0.0.1:9999ï¼Œæ›´æ–°é…ç½®åè¯·é•¿æŒ‰é£è½¦-æ›´æ–°ï¼Œç„¶åé‡å¯ä»£ç†
# > BoxJsç›¸å…³æ•™ç¨‹å‚è€ƒã€Œhttps://docs.boxjs.appã€
https://raw.githubusercontent.com/chavyleung/scripts/master/chavy.box.js, host=boxjs.com, tag=BoxJS, path=^/, enabled=false



[mitm]

skip_validating_cert = true
force_sni_domain_name = false

hostname = -*.fcbox.com, -*huami.com, -*amemv.com, -*snssdk.com, -www.google.com
